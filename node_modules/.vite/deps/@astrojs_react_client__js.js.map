{
  "version": 3,
  "sources": ["../../react-dom/client.js", "../../@astrojs/react/client.js", "../../@astrojs/react/static-html.js"],
  "sourcesContent": ["'use strict';\r\n\r\nvar m = require('react-dom');\r\nif (process.env.NODE_ENV === 'production') {\r\n  exports.createRoot = m.createRoot;\r\n  exports.hydrateRoot = m.hydrateRoot;\r\n} else {\r\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\r\n  exports.createRoot = function(c, o) {\r\n    i.usingClientEntryPoint = true;\r\n    try {\r\n      return m.createRoot(c, o);\r\n    } finally {\r\n      i.usingClientEntryPoint = false;\r\n    }\r\n  };\r\n  exports.hydrateRoot = function(c, h, o) {\r\n    i.usingClientEntryPoint = true;\r\n    try {\r\n      return m.hydrateRoot(c, h, o);\r\n    } finally {\r\n      i.usingClientEntryPoint = false;\r\n    }\r\n  };\r\n}\r\n", "import { createElement, startTransition } from 'react';\r\nimport { createRoot, hydrateRoot } from 'react-dom/client';\r\nimport StaticHtml from './static-html.js';\r\n\r\nfunction isAlreadyHydrated(element) {\r\n\tfor (const key in element) {\r\n\t\tif (key.startsWith('__reactContainer')) {\r\n\t\t\treturn key;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction createReactElementFromDOMElement(element) {\r\n\tlet attrs = {};\r\n\tfor (const attr of element.attributes) {\r\n\t\tattrs[attr.name] = attr.value;\r\n\t}\r\n\t// If the element has no children, we can create a simple React element\r\n\tif (element.firstChild === null) {\r\n\t\treturn createElement(element.localName, attrs);\r\n\t}\r\n\r\n\treturn createElement(\r\n\t\telement.localName,\r\n\t\tattrs,\r\n\t\tArray.from(element.childNodes)\r\n\t\t\t.map((c) => {\r\n\t\t\t\tif (c.nodeType === Node.TEXT_NODE) {\r\n\t\t\t\t\treturn c.data;\r\n\t\t\t\t} else if (c.nodeType === Node.ELEMENT_NODE) {\r\n\t\t\t\t\treturn createReactElementFromDOMElement(c);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.filter((a) => !!a),\r\n\t);\r\n}\r\n\r\nfunction getChildren(childString, experimentalReactChildren) {\r\n\tif (experimentalReactChildren && childString) {\r\n\t\tlet children = [];\r\n\t\tlet template = document.createElement('template');\r\n\t\ttemplate.innerHTML = childString;\r\n\t\tfor (let child of template.content.children) {\r\n\t\t\tchildren.push(createReactElementFromDOMElement(child));\r\n\t\t}\r\n\t\treturn children;\r\n\t} else if (childString) {\r\n\t\treturn createElement(StaticHtml, { value: childString });\r\n\t} else {\r\n\t\treturn undefined;\r\n\t}\r\n}\r\n\r\n// Keep a map of roots so we can reuse them on re-renders\r\nlet rootMap = new WeakMap();\r\nconst getOrCreateRoot = (element, creator) => {\r\n\tlet root = rootMap.get(element);\r\n\tif (!root) {\r\n\t\troot = creator();\r\n\t\trootMap.set(element, root);\r\n\t}\r\n\treturn root;\r\n};\r\n\r\nexport default (element) =>\r\n\t(Component, props, { default: children, ...slotted }, { client }) => {\r\n\t\tif (!element.hasAttribute('ssr')) return;\r\n\r\n\t\tconst actionKey = element.getAttribute('data-action-key');\r\n\t\tconst actionName = element.getAttribute('data-action-name');\r\n\t\tconst stringifiedActionResult = element.getAttribute('data-action-result');\r\n\r\n\t\tconst formState =\r\n\t\t\tactionKey && actionName && stringifiedActionResult\r\n\t\t\t\t? [JSON.parse(stringifiedActionResult), actionKey, actionName]\r\n\t\t\t\t: undefined;\r\n\r\n\t\tconst renderOptions = {\r\n\t\t\tidentifierPrefix: element.getAttribute('prefix'),\r\n\t\t\tformState,\r\n\t\t};\r\n\t\tfor (const [key, value] of Object.entries(slotted)) {\r\n\t\t\tprops[key] = createElement(StaticHtml, { value, name: key });\r\n\t\t}\r\n\r\n\t\tconst componentEl = createElement(\r\n\t\t\tComponent,\r\n\t\t\tprops,\r\n\t\t\tgetChildren(children, element.hasAttribute('data-react-children')),\r\n\t\t);\r\n\t\tconst rootKey = isAlreadyHydrated(element);\r\n\t\t// HACK: delete internal react marker for nested components to suppress aggressive warnings\r\n\t\tif (rootKey) {\r\n\t\t\tdelete element[rootKey];\r\n\t\t}\r\n\t\tif (client === 'only') {\r\n\t\t\treturn startTransition(() => {\r\n\t\t\t\tconst root = getOrCreateRoot(element, () => {\r\n\t\t\t\t\tconst r = createRoot(element);\r\n\t\t\t\t\telement.addEventListener('astro:unmount', () => r.unmount(), { once: true });\r\n\t\t\t\t\treturn r;\r\n\t\t\t\t});\r\n\t\t\t\troot.render(componentEl);\r\n\t\t\t});\r\n\t\t}\r\n\t\tstartTransition(() => {\r\n\t\t\tconst root = getOrCreateRoot(element, () => {\r\n\t\t\t\tconst r = hydrateRoot(element, componentEl, renderOptions);\r\n\t\t\t\telement.addEventListener('astro:unmount', () => r.unmount(), { once: true });\r\n\t\t\t\treturn r;\r\n\t\t\t});\r\n\t\t\troot.render(componentEl);\r\n\t\t});\r\n\t};\r\n", "import { createElement as h } from 'react';\r\n\r\n/**\r\n * Astro passes `children` as a string of HTML, so we need\r\n * a wrapper `div` to render that content as VNodes.\r\n *\r\n * As a bonus, we can signal to React that this subtree is\r\n * entirely static and will never change via `shouldComponentUpdate`.\r\n */\r\nconst StaticHtml = ({ value, name, hydrate = true }) => {\r\n\tif (!value) return null;\r\n\tconst tagName = hydrate ? 'astro-slot' : 'astro-static-slot';\r\n\treturn h(tagName, {\r\n\t\tname,\r\n\t\tsuppressHydrationWarning: true,\r\n\t\tdangerouslySetInnerHTML: { __html: value },\r\n\t});\r\n};\r\n\r\n/**\r\n * This tells React to opt-out of re-rendering this subtree,\r\n * In addition to being a performance optimization,\r\n * this also allows other frameworks to attach to `children`.\r\n *\r\n * See https://preactjs.com/guide/v8/external-dom-mutations\r\n */\r\nStaticHtml.shouldComponentUpdate = () => false;\r\n\r\nexport default StaticHtml;\r\n"],
  "mappings": "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",
  "names": ["h", "import_react", "h"]
}
